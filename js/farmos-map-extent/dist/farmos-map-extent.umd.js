(function(R){typeof define=="function"&&define.amd?define(R):R()})(function(){"use strict";var R={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},m={};m[R.RADIANS]=6370997/(2*Math.PI),m[R.DEGREES]=2*Math.PI*6370997/360,m[R.FEET]=.3048,m[R.METERS]=1,m[R.USFEET]=1200/3937;var U=R,St=function(){function n(r){this.code_=r.code,this.units_=r.units,this.extent_=r.extent!==void 0?r.extent:null,this.worldExtent_=r.worldExtent!==void 0?r.worldExtent:null,this.axisOrientation_=r.axisOrientation!==void 0?r.axisOrientation:"enu",this.global_=r.global!==void 0?r.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=r.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=r.metersPerUnit}return n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||m[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(r){this.global_=r,this.canWrapX_=!!(r&&this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(r){this.defaultTileGrid_=r},n.prototype.setExtent=function(r){this.extent_=r,this.canWrapX_=!!(this.global_&&r)},n.prototype.setWorldExtent=function(r){this.worldExtent_=r},n.prototype.setGetPointResolution=function(r){this.getPointResolutionFunc_=r},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},n}(),V=St,Ct=function(){var n;return"cosh"in Math?n=Math.cosh:n=function(r){var t=Math.exp(r);return(t+1/t)/2},n}();function It(n,r,t,e,i,o){var a=i-t,u=o-e;if(a!==0||u!==0){var s=((n-t)*a+(r-e)*u)/(a*a+u*u);s>1?(t=i,e=o):s>0&&(t+=a*s,e+=u*s)}return S(n,r,t,e)}function S(n,r,t,e){var i=t-n,o=e-r;return i*i+o*o}function Gt(n,r,t){return n+t*(r-n)}var Lt=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),N=6378137,C=Math.PI*N,Mt=[-C,-C,C,C],Nt=[-180,-85,180,85],X=N*Math.log(Math.tan(Math.PI/2)),I=function(n){Lt(r,n);function r(t){return n.call(this,{code:t,units:U.METERS,extent:Mt,global:!0,worldExtent:Nt,getPointResolution:function(e,i){return e/Ct(i[1]/N)}})||this}return r}(V),z=[new I("EPSG:3857"),new I("EPSG:102100"),new I("EPSG:102113"),new I("EPSG:900913"),new I("http://www.opengis.net/def/crs/EPSG/0/3857"),new I("http://www.opengis.net/gml/srs/epsg.xml#3857")];function At(n,r,t){var e=n.length,i=t>1?t:2,o=r;o===void 0&&(i>2?o=n.slice():o=new Array(e));for(var a=0;a<e;a+=i){o[a]=C*n[a]/180;var u=N*Math.log(Math.tan(Math.PI*(+n[a+1]+90)/360));u>X?u=X:u<-X&&(u=-X),o[a+1]=u}return o}function Xt(n,r,t){var e=n.length,i=t>1?t:2,o=r;o===void 0&&(i>2?o=n.slice():o=new Array(e));for(var a=0;a<e;a+=i)o[a]=180*n[a]/C,o[a+1]=360*Math.atan(Math.exp(n[a+1]/N))/Math.PI-90;return o}var Ft=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yt=6378137,q=[-180,-90,180,90],Ut=Math.PI*Yt/180,O=function(n){Ft(r,n);function r(t,e){return n.call(this,{code:t,units:U.DEGREES,extent:q,axisOrientation:e,global:!0,metersPerUnit:Ut,worldExtent:q})||this}return r}(V),J=[new O("CRS:84"),new O("EPSG:4326","neu"),new O("urn:ogc:def:crs:OGC:1.3:CRS84"),new O("urn:ogc:def:crs:OGC:2:84"),new O("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new O("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new O("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],$={};function $t(n){return $[n]||$[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Dt(n,r){$[n]=r}var x=typeof Object.assign=="function"?Object.assign:function(n,r){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(n),e=1,i=arguments.length;e<i;++e){var o=arguments[e];if(o!=null)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t};function Q(n){for(var r in n)delete n[r]}function jt(n){var r;for(r in n)return!1;return!r}var G={};function F(n,r,t){var e=n.getCode(),i=r.getCode();e in G||(G[e]={}),G[e][i]=t}function Bt(n,r){var t;return n in G&&r in G[n]&&(t=G[n][r]),t}var _={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function P(){return function(){throw new Error("Unimplemented abstract method.")}()}var Wt=0;function Ht(n){return n.ol_uid||(n.ol_uid=String(++Wt))}function Kt(n,r,t){var e=Math.min.apply(null,n),i=Math.min.apply(null,r),o=Math.max.apply(null,n),a=Math.max.apply(null,r);return D(e,i,o,a,t)}function b(n,r,t){var e,i;return r<n[0]?e=n[0]-r:n[2]<r?e=r-n[2]:e=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,e*e+i*i}function Zt(n,r){return n[0]<=r[0]&&r[2]<=n[2]&&n[1]<=r[1]&&r[3]<=n[3]}function Vt(n,r,t){return n[0]<=r&&r<=n[2]&&n[1]<=t&&t<=n[3]}function k(n,r){var t=n[0],e=n[1],i=n[2],o=n[3],a=r[0],u=r[1],s=_.UNKNOWN;return a<t?s=s|_.LEFT:a>i&&(s=s|_.RIGHT),u<e?s=s|_.BELOW:u>o&&(s=s|_.ABOVE),s===_.UNKNOWN&&(s=_.INTERSECTING),s}function tt(){return[1/0,1/0,-1/0,-1/0]}function D(n,r,t,e,i){return i?(i[0]=n,i[1]=r,i[2]=t,i[3]=e,i):[n,r,t,e]}function rt(n){return D(1/0,1/0,-1/0,-1/0,n)}function zt(n,r){var t=n[0],e=n[1];return D(t,e,t,e,r)}function qt(n,r,t,e,i){var o=rt(i);return nt(o,n,r,t,e)}function nt(n,r,t,e,i){for(;t<e;t+=i)Jt(n,r[t],r[t+1]);return n}function Jt(n,r,t){n[0]=Math.min(n[0],r),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],r),n[3]=Math.max(n[3],t)}function xt(n,r){var t;return t=r(Qt(n)),t||(t=r(bt(n)),t)||(t=r(tr(n)),t)||(t=r(kt(n)),t)?t:!1}function Qt(n){return[n[0],n[1]]}function bt(n){return[n[2],n[1]]}function et(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function it(n){return n[3]-n[1]}function kt(n){return[n[0],n[3]]}function tr(n){return[n[2],n[3]]}function rr(n,r){return n[0]<=r[2]&&n[2]>=r[0]&&n[1]<=r[3]&&n[3]>=r[1]}function nr(n,r){return r?(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r):n}function er(n,r,t){var e=!1,i=k(n,r),o=k(n,t);if(i===_.INTERSECTING||o===_.INTERSECTING)e=!0;else{var a=n[0],u=n[1],s=n[2],l=n[3],c=r[0],h=r[1],f=t[0],v=t[1],p=(v-h)/(f-c),g=void 0,y=void 0;!!(o&_.ABOVE)&&!(i&_.ABOVE)&&(g=f-(v-l)/p,e=g>=a&&g<=s),!e&&!!(o&_.RIGHT)&&!(i&_.RIGHT)&&(y=v-(f-s)*p,e=y>=u&&y<=l),!e&&!!(o&_.BELOW)&&!(i&_.BELOW)&&(g=f-(v-u)/p,e=g>=a&&g<=s),!e&&!!(o&_.LEFT)&&!(i&_.LEFT)&&(y=v-(f-a)*p,e=y>=u&&y<=l)}return e}function ir(n,r,t,e){var i=[];if(e>1)for(var o=n[2]-n[0],a=n[3]-n[1],u=0;u<e;++u)i.push(n[0]+o*u/e,n[1],n[2],n[1]+a*u/e,n[2]-o*u/e,n[3],n[0],n[3]-a*u/e);else i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];r(i,i,2);for(var s=[],l=[],u=0,c=i.length;u<c;u+=2)s.push(i[u]),l.push(i[u+1]);return Kt(s,l,t)}var j={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};function ot(n,r,t){var e;if(r!==void 0){for(var i=0,o=n.length;i<o;++i)r[i]=n[i];e=r}else e=n.slice();return e}function or(n,r,t){if(r!==void 0&&n!==r){for(var e=0,i=n.length;e<i;++e)r[e]=n[e];n=r}return n}function ar(n){Dt(n.getCode(),n),F(n,n,ot)}function ur(n){n.forEach(ar)}function B(n){return typeof n=="string"?$t(n):n||null}function at(n){ur(n),n.forEach(function(r){n.forEach(function(t){r!==t&&F(r,t,ot)})})}function sr(n,r,t,e){n.forEach(function(i){r.forEach(function(o){F(i,o,t),F(o,i,e)})})}function lr(n,r){var t=n.getCode(),e=r.getCode(),i=Bt(t,e);return i||(i=or),i}function W(n,r){var t=B(n),e=B(r);return lr(t,e)}function cr(n,r,t,e){var i=W(r,t);return ir(n,i,void 0,e)}function hr(){at(z),at(J),sr(J,z,At,Xt)}hr();var E={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},fr=function(){function n(r){this.propagationStopped,this.defaultPrevented,this.type=r,this.target=null}return n.prototype.preventDefault=function(){this.defaultPrevented=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n}(),ut=fr,vr={PROPERTYCHANGE:"propertychange"},pr=function(){function n(){this.disposed=!1}return n.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},n}(),gr=pr;function yr(n,r){return n>r?1:n<r?-1:0}function _r(n,r){for(var t=Array.isArray(r)?r:[r],e=t.length,i=0;i<e;i++)n[n.length]=t[i]}function dr(n,r){var t=n.length;if(t!==r.length)return!1;for(var e=0;e<t;e++)if(n[e]!==r[e])return!1;return!0}function st(){}function Er(n){var r=!1,t,e,i;return function(){var o=Array.prototype.slice.call(arguments);return(!r||this!==i||!dr(o,e))&&(r=!0,i=this,e=o,t=n.apply(this,arguments)),t}}var Pr=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rr=function(n){Pr(r,n);function r(t){var e=n.call(this)||this;return e.eventTarget_=t,e.pendingRemovals_=null,e.dispatching_=null,e.listeners_=null,e}return r.prototype.addEventListener=function(t,e){if(!(!t||!e)){var i=this.listeners_||(this.listeners_={}),o=i[t]||(i[t]=[]);o.indexOf(e)===-1&&o.push(e)}},r.prototype.dispatchEvent=function(t){var e=typeof t=="string"?new ut(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var o=this.listeners_&&this.listeners_[i],a;if(o){var u=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});i in u||(u[i]=0,s[i]=0),++u[i];for(var l=0,c=o.length;l<c;++l)if("handleEvent"in o[l]?a=o[l].handleEvent(e):a=o[l].call(this,e),a===!1||e.propagationStopped){a=!1;break}if(--u[i],u[i]===0){var h=s[i];for(delete s[i];h--;)this.removeEventListener(i,st);delete u[i]}return a}},r.prototype.disposeInternal=function(){this.listeners_&&Q(this.listeners_)},r.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},r.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},r.prototype.removeEventListener=function(t,e){var i=this.listeners_&&this.listeners_[t];if(i){var o=i.indexOf(e);o!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[o]=st,++this.pendingRemovals_[t]):(i.splice(o,1),i.length===0&&delete this.listeners_[t]))}},r}(gr),Or=Rr,wr={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function H(n,r,t,e,i){if(e&&e!==n&&(t=t.bind(e)),i){var o=t;t=function(){n.removeEventListener(r,t),o.apply(this,arguments)}}var a={target:n,type:r,listener:t};return n.addEventListener(r,t),a}function lt(n,r,t,e){return H(n,r,t,e,!0)}function ct(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Q(n))}var Tr=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Y=function(n){Tr(r,n);function r(){var t=n.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return r.prototype.changed=function(){++this.revision_,this.dispatchEvent(wr.CHANGE)},r.prototype.getRevision=function(){return this.revision_},r.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),a=0;a<i;++a)o[a]=H(this,t[a],e);return o}else return H(this,t,e)},r.prototype.onceInternal=function(t,e){var i;if(Array.isArray(t)){var o=t.length;i=new Array(o);for(var a=0;a<o;++a)i[a]=lt(this,t[a],e)}else i=lt(this,t,e);return e.ol_key=i,i},r.prototype.unInternal=function(t,e){var i=e.ol_key;if(i)mr(i);else if(Array.isArray(t))for(var o=0,a=t.length;o<a;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)},r}(Or);Y.prototype.on,Y.prototype.once,Y.prototype.un;function mr(n){if(Array.isArray(n))for(var r=0,t=n.length;r<t;++r)ct(n[r]);else ct(n)}var Sr=Y,ht=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ft=function(n){ht(r,n);function r(t,e,i){var o=n.call(this,t)||this;return o.key=e,o.oldValue=i,o}return r}(ut),Cr=function(n){ht(r,n);function r(t){var e=n.call(this)||this;return e.on,e.once,e.un,Ht(e),e.values_=null,t!==void 0&&e.setProperties(t),e}return r.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},r.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},r.prototype.getProperties=function(){return this.values_&&x({},this.values_)||{}},r.prototype.hasProperties=function(){return!!this.values_},r.prototype.notify=function(t,e){var i;i="change:"+t,this.dispatchEvent(new ft(i,t,e)),i=vr.PROPERTYCHANGE,this.dispatchEvent(new ft(i,t,e))},r.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},r.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},r.prototype.set=function(t,e,i){var o=this.values_||(this.values_={});if(i)o[t]=e;else{var a=o[t];o[t]=e,a!==e&&this.notify(t,a)}},r.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},r.prototype.applyProperties=function(t){!t.values_||x(this.values_||(this.values_={}),t.values_)},r.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],jt(this.values_)&&(this.values_=null),e||this.notify(t,i)}},r}(Sr),Ir=Cr;new Array(6);function Gr(){return[1,0,0,1,0,0]}function Lr(n,r,t,e,i,o,a,u){var s=Math.sin(o),l=Math.cos(o);return n[0]=e*l,n[1]=i*s,n[2]=-e*s,n[3]=i*l,n[4]=a*e*l-u*e*s+r,n[5]=a*i*s+u*i*l+t,n}function Mr(n,r,t,e,i,o){for(var a=o||[],u=0,s=r;s<t;s+=e){var l=n[s],c=n[s+1];a[u++]=i[0]*l+i[2]*c+i[4],a[u++]=i[1]*l+i[3]*c+i[5]}return o&&a.length!=u&&(a.length=u),a}function Nr(n,r,t,e,i,o,a){for(var u=a||[],s=Math.cos(i),l=Math.sin(i),c=o[0],h=o[1],f=0,v=r;v<t;v+=e){var p=n[v]-c,g=n[v+1]-h;u[f++]=c+p*s-g*l,u[f++]=h+p*l+g*s;for(var y=v+2;y<v+e;++y)u[f++]=n[y]}return a&&u.length!=f&&(u.length=f),u}function Ar(n,r,t,e,i,o,a,u){for(var s=u||[],l=a[0],c=a[1],h=0,f=r;f<t;f+=e){var v=n[f]-l,p=n[f+1]-c;s[h++]=l+i*v,s[h++]=c+o*p;for(var g=f+2;g<f+e;++g)s[h++]=n[g]}return u&&s.length!=h&&(s.length=h),s}function Xr(n,r,t,e,i,o,a){for(var u=a||[],s=0,l=r;l<t;l+=e){u[s++]=n[l]+i,u[s++]=n[l+1]+o;for(var c=l+2;c<l+e;++c)u[s++]=n[c]}return a&&u.length!=s&&(u.length=s),u}var Fr=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vt=Gr(),Yr=function(n){Fr(r,n);function r(){var t=n.call(this)||this;return t.extent_=tt(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Er(function(e,i,o){if(!o)return this.getSimplifiedGeometry(i);var a=this.clone();return a.applyTransform(o),a.getSimplifiedGeometry(i)}),t}return r.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},r.prototype.clone=function(){return P()},r.prototype.closestPointXY=function(t,e,i,o){return P()},r.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},r.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},r.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},r.prototype.computeExtent=function(t){return P()},r.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&rt(e),this.extentRevision_=this.getRevision()}return nr(this.extent_,t)},r.prototype.rotate=function(t,e){P()},r.prototype.scale=function(t,e,i){P()},r.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},r.prototype.getSimplifiedGeometry=function(t){return P()},r.prototype.getType=function(){return P()},r.prototype.applyTransform=function(t){P()},r.prototype.intersectsExtent=function(t){return P()},r.prototype.translate=function(t,e){P()},r.prototype.transform=function(t,e){var i=B(t),o=i.getUnits()==U.TILE_PIXELS?function(a,u,s){var l=i.getExtent(),c=i.getWorldExtent(),h=it(c)/it(l);return Lr(vt,c[0],c[3],h,-h,0,0,0),Mr(a,0,a.length,s,vt,u),W(i,e)(a,u,s)}:W(i,e);return this.applyTransform(o),this},r}(Ir),Ur=Yr,$r=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dr=function(n){$r(r,n);function r(){var t=n.call(this)||this;return t.layout=E.XY,t.stride=2,t.flatCoordinates=null,t}return r.prototype.computeExtent=function(t){return qt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinates=function(){return P()},r.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},r.prototype.getFlatCoordinates=function(){return this.flatCoordinates},r.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},r.prototype.getLayout=function(){return this.layout},r.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t),i=e.getFlatCoordinates();return i.length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},r.prototype.getSimplifiedGeometryInternal=function(t){return this},r.prototype.getStride=function(){return this.stride},r.prototype.setFlatCoordinates=function(t,e){this.stride=pt(t),this.layout=t,this.flatCoordinates=e},r.prototype.setCoordinates=function(t,e){P()},r.prototype.setLayout=function(t,e,i){var o;if(t)o=pt(t);else{for(var a=0;a<i;++a)if(e.length===0){this.layout=E.XY,this.stride=2;return}else e=e[0];o=e.length,t=jr(o)}this.layout=t,this.stride=o},r.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},r.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var o=this.getStride();Nr(i,0,i.length,o,t,e,i),this.changed()}},r.prototype.scale=function(t,e,i){var o=e;o===void 0&&(o=t);var a=i;a||(a=et(this.getExtent()));var u=this.getFlatCoordinates();if(u){var s=this.getStride();Ar(u,0,u.length,s,t,o,a,u),this.changed()}},r.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var o=this.getStride();Xr(i,0,i.length,o,t,e,i),this.changed()}},r}(Ur);function jr(n){var r;return n==2?r=E.XY:n==3?r=E.XYZ:n==4&&(r=E.XYZM),r}function pt(n){var r;return n==E.XY?r=2:n==E.XYZ||n==E.XYM?r=3:n==E.XYZM&&(r=4),r}var K=Dr;function gt(n,r,t,e,i,o,a){var u=n[r],s=n[r+1],l=n[t]-u,c=n[t+1]-s,h;if(l===0&&c===0)h=r;else{var f=((i-u)*l+(o-s)*c)/(l*l+c*c);if(f>1)h=t;else if(f>0){for(var v=0;v<e;++v)a[v]=Gt(n[r+v],n[t+v],f);a.length=e;return}else h=r}for(var v=0;v<e;++v)a[v]=n[h+v];a.length=e}function yt(n,r,t,e,i){var o=n[r],a=n[r+1];for(r+=e;r<t;r+=e){var u=n[r],s=n[r+1],l=S(o,a,u,s);l>i&&(i=l),o=u,a=s}return i}function Br(n,r,t,e,i){for(var o=0,a=t.length;o<a;++o){var u=t[o];i=yt(n,r,u,e,i),r=u}return i}function _t(n,r,t,e,i,o,a,u,s,l,c){if(r==t)return l;var h,f;if(i===0)if(f=S(a,u,n[r],n[r+1]),f<l){for(h=0;h<e;++h)s[h]=n[r+h];return s.length=e,f}else return l;for(var v=c||[NaN,NaN],p=r+e;p<t;)if(gt(n,p-e,p,e,a,u,v),f=S(a,u,v[0],v[1]),f<l){for(l=f,h=0;h<e;++h)s[h]=v[h];s.length=e,p+=e}else p+=e*Math.max((Math.sqrt(f)-Math.sqrt(l))/i|0,1);if(o&&(gt(n,t-e,r,e,a,u,v),f=S(a,u,v[0],v[1]),f<l)){for(l=f,h=0;h<e;++h)s[h]=v[h];s.length=e}return l}function Wr(n,r,t,e,i,o,a,u,s,l,c){for(var h=c||[NaN,NaN],f=0,v=t.length;f<v;++f){var p=t[f];l=_t(n,r,p,e,i,o,a,u,s,l,h),r=p}return l}function Hr(n,r,t,e){for(var i=0,o=t.length;i<o;++i)n[r++]=t[i];return r}function dt(n,r,t,e){for(var i=0,o=t.length;i<o;++i)for(var a=t[i],u=0;u<e;++u)n[r++]=a[u];return r}function Kr(n,r,t,e,i){for(var o=i||[],a=0,u=0,s=t.length;u<s;++u){var l=dt(n,r,t[u],e);o[a++]=l,r=l}return o.length=a,o}function Zr(n,r,t,e,i,o,a){var u=(t-r)/e;if(u<3){for(;r<t;r+=e)o[a++]=n[r],o[a++]=n[r+1];return a}var s=new Array(u);s[0]=1,s[u-1]=1;for(var l=[r,t-e],c=0;l.length>0;){for(var h=l.pop(),f=l.pop(),v=0,p=n[f],g=n[f+1],y=n[h],Z=n[h+1],d=f+e;d<h;d+=e){var T=n[d],M=n[d+1],A=It(T,M,p,g,y,Z);A>v&&(c=d,v=A)}v>i&&(s[(c-r)/e]=1,f+e<c&&l.push(f,c),c+e<h&&l.push(c,h))}for(var d=0;d<u;++d)s[d]&&(o[a++]=n[r+d*e],o[a++]=n[r+d*e+1]);return a}function L(n,r){return r*Math.round(n/r)}function Vr(n,r,t,e,i,o,a){if(r==t)return a;var u=L(n[r],i),s=L(n[r+1],i);r+=e,o[a++]=u,o[a++]=s;var l,c;do if(l=L(n[r],i),c=L(n[r+1],i),r+=e,r==t)return o[a++]=l,o[a++]=c,a;while(l==u&&c==s);for(;r<t;){var h=L(n[r],i),f=L(n[r+1],i);if(r+=e,!(h==l&&f==c)){var v=l-u,p=c-s,g=h-u,y=f-s;if(v*y==p*g&&(v<0&&g<v||v==g||v>0&&g>v)&&(p<0&&y<p||p==y||p>0&&y>p)){l=h,c=f;continue}o[a++]=l,o[a++]=c,u=l,s=c,l=h,c=f}}return o[a++]=l,o[a++]=c,a}function zr(n,r,t,e,i,o,a,u){for(var s=0,l=t.length;s<l;++s){var c=t[s];a=Vr(n,r,c,e,i,o,a),u.push(a),r=c}return a}function Et(n,r,t,e,i){for(var o=i!==void 0?i:[],a=0,u=r;u<t;u+=e)o[a++]=n.slice(u,u+e);return o.length=a,o}function qr(n,r,t,e,i){for(var o=i!==void 0?i:[],a=0,u=0,s=t.length;u<s;++u){var l=t[u];o[a++]=Et(n,r,l,e,o[a]),r=l}return o.length=a,o}function Pt(n,r,t,e){for(var i=0,o=n[t-e],a=n[t-e+1];r<t;r+=e){var u=n[r],s=n[r+1];i+=a*u-o*s,o=u,a=s}return i/2}function Jr(n,r,t,e){for(var i=0,o=0,a=t.length;o<a;++o){var u=t[o];i+=Pt(n,r,u,e),r=u}return i}var xr=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qr=function(n){xr(r,n);function r(t,e){var i=n.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(e,t):i.setCoordinates(t,e),i}return r.prototype.clone=function(){return new r(this.flatCoordinates.slice(),this.layout)},r.prototype.closestPointXY=function(t,e,i,o){return o<b(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(yt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_t(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,o))},r.prototype.getArea=function(){return Pt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getCoordinates=function(){return Et(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=Zr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new r(e,E.XY)},r.prototype.getType=function(){return j.LINEAR_RING},r.prototype.intersectsExtent=function(t){return!1},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=dt(this.flatCoordinates,0,t,this.stride),this.changed()},r}(K),Rt=Qr,br=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kr=function(n){br(r,n);function r(t,e){var i=n.call(this)||this;return i.setCoordinates(t,e),i}return r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,e,i,o){var a=this.flatCoordinates,u=S(t,e,a[0],a[1]);if(u<o){for(var s=this.stride,l=0;l<s;++l)i[l]=a[l];return i.length=s,u}else return o},r.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},r.prototype.computeExtent=function(t){return zt(this.flatCoordinates,t)},r.prototype.getType=function(){return j.POINT},r.prototype.intersectsExtent=function(t){return Vt(t,this.flatCoordinates[0],this.flatCoordinates[1])},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Hr(this.flatCoordinates,0,t,this.stride),this.changed()},r}(K),tn=kr;function rn(n,r,t,e,i){var o=xt(i,function(a){return!w(n,r,t,e,a[0],a[1])});return!o}function w(n,r,t,e,i,o){for(var a=0,u=n[t-e],s=n[t-e+1];r<t;r+=e){var l=n[r],c=n[r+1];s<=o?c>o&&(l-u)*(o-s)-(i-u)*(c-s)>0&&a++:c<=o&&(l-u)*(o-s)-(i-u)*(c-s)<0&&a--,u=l,s=c}return a!==0}function Ot(n,r,t,e,i,o){if(t.length===0||!w(n,r,t[0],e,i,o))return!1;for(var a=1,u=t.length;a<u;++a)if(w(n,t[a-1],t[a],e,i,o))return!1;return!0}function nn(n,r,t,e,i,o,a){for(var u,s,l,c,h,f,v,p=i[o+1],g=[],y=0,Z=t.length;y<Z;++y){var d=t[y];for(c=n[d-e],f=n[d-e+1],u=r;u<d;u+=e)h=n[u],v=n[u+1],(p<=f&&v<=p||f<=p&&p<=v)&&(l=(p-f)/(v-f)*(h-c)+c,g.push(l)),c=h,f=v}var T=NaN,M=-1/0;for(g.sort(yr),c=g[0],u=1,s=g.length;u<s;++u){h=g[u];var A=Math.abs(h-c);A>M&&(l=(c+h)/2,Ot(n,r,t,e,l,p)&&(T=l,M=A)),c=h}return isNaN(T)&&(T=i[o]),a?(a.push(T,p,M),a):[T,p,M]}function en(n,r,t,e,i){var o;for(r+=e;r<t;r+=e)if(o=i(n.slice(r-e,r),n.slice(r,r+e)),o)return o;return!1}function wt(n,r,t,e,i){var o=nt(tt(),n,r,t,e);return rr(i,o)?Zt(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:en(n,r,t,e,function(a,u){return er(i,a,u)}):!1}function on(n,r,t,e,i){return!!(wt(n,r,t,e,i)||w(n,r,t,e,i[0],i[1])||w(n,r,t,e,i[0],i[3])||w(n,r,t,e,i[2],i[1])||w(n,r,t,e,i[2],i[3]))}function an(n,r,t,e,i){if(!on(n,r,t[0],e,i))return!1;if(t.length===1)return!0;for(var o=1,a=t.length;o<a;++o)if(rn(n,t[o-1],t[o],e,i)&&!wt(n,t[o-1],t[o],e,i))return!1;return!0}function un(n,r,t,e){for(;r<t-e;){for(var i=0;i<e;++i){var o=n[r+i];n[r+i]=n[t-e+i],n[t-e+i]=o}r+=e,t-=e}}function Tt(n,r,t,e){for(var i=0,o=n[t-e],a=n[t-e+1];r<t;r+=e){var u=n[r],s=n[r+1];i+=(u-o)*(s+a),o=u,a=s}return i===0?void 0:i>0}function sn(n,r,t,e,i){for(var o=i!==void 0?i:!1,a=0,u=t.length;a<u;++a){var s=t[a],l=Tt(n,r,s,e);if(a===0){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;r=s}return!0}function mt(n,r,t,e,i){for(var o=i!==void 0?i:!1,a=0,u=t.length;a<u;++a){var s=t[a],l=Tt(n,r,s,e),c=a===0?o&&l||!o&&!l:o&&!l||!o&&l;c&&un(n,r,s,e),r=s}return r}var ln=function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cn=function(n){ln(r,n);function r(t,e,i){var o=n.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,e!==void 0&&i?(o.setFlatCoordinates(e,t),o.ends_=i):o.setCoordinates(t,e),o}return r.prototype.appendLinearRing=function(t){this.flatCoordinates?_r(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,e,i,o){return o<b(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Br(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wr(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,o))},r.prototype.containsXY=function(t,e){return Ot(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},r.prototype.getArea=function(){return Jr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},r.prototype.getCoordinates=function(t){var e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),mt(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,qr(e,0,this.ends_,this.stride)},r.prototype.getEnds=function(){return this.ends_},r.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=et(this.getExtent());this.flatInteriorPoint_=nn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},r.prototype.getInteriorPoint=function(){return new tn(this.getFlatInteriorPoint(),E.XYM)},r.prototype.getLinearRingCount=function(){return this.ends_.length},r.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Rt(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},r.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,o=[],a=0,u=0,s=i.length;u<s;++u){var l=i[u],c=new Rt(e.slice(a,l),t);o.push(c),a=l}return o},r.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;sn(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=mt(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},r.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];return e.length=zr(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new r(e,E.XY,i)},r.prototype.getType=function(){return j.POLYGON},r.prototype.intersectsExtent=function(t){return an(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Kr(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},r}(K);function hn(n){var r=n[0],t=n[1],e=n[2],i=n[3],o=[r,t,r,i,e,i,e,t,r,t];return new cn(o,E.XY,[o.length])}const fn=({map:n})=>{const r=n.getView().calculateExtent(n.getSize()),t=cr(r,"EPSG:3857","EPSG:4326");return hn(t).getCoordinates()[0]};window.farm_farmlab={getCurrentViewExtentCoordinates:fn}});
